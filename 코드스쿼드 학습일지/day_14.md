# 14일차 학습일지
## 쓰레드

### 프로세스와 쓰레드
- 프로세스
  - 실행 중인 프로그램, 자원과 쓰레드로 구성
- 쓰레드
  - 프로세스 내에서 실제 작업을 수행, 모든 프로세스는 최소한 하나의 쓰레드를 가지고 있다.
- 멀티 쓰레드 장단점
  - 장점
      - 시스템 자원을 보다 효율적으로 사용할 수 있다.
      - 사용자에 대한 응답성이 향상된다.
      - 작업이 분리되어 코드가 간결해 진다.
  - 단점
      - 동기화에 주의해야 한다.
      - 교착상태가 발생하지 않도록 주의해야 한다.
      - 각 쓰레드가 효율적으로 고르게 실행될 수 있게 해야 한다.

### 쓰레드 구현
1. Thread 클래스를 상속
  ```java
  class MyThread extends Thread {
    public void run() { // Thread클래스의 run()을 오버라이딩
        // 작업 내용
    }

  MyThread t1 = new MyThread();
  t1.start();
  ```
2. Runnable 인터페이스를 구현 (확장성이 좀 더 좋다.)
  ```java
  class MyThread2 implements Runnable {
    public void run() { // Runnable인터페이스의 추상메서드 run()을 구현
        // 작업 내용
    }

  Runnable r = new MyThread2();
  Thread t2 = new Thread(r);
  // Thread t2 = new Thread(new MyThread2());
  t2.start();
  ```
### 쓰레드의 실행
- 쓰레드를 생성한 후에 start()를 호출해야 쓰레드가 작업을 시작한다.
- OS스케줄러가 실행 순서를 결정
- start()와 run()
    - start() 메소드는 새로운 호출 스택을 생성하고 거기에 run() 메소드를 올린다.
    - run() 메소드는 작업 내용을 작성하고 실행, run()을 호출x
- t2.join() t2의 쓰레드가 작업이 끝날 때까지 기다린다.

### main쓰레드
- main메서드의 코드를 수행하는 쓰레드
- 쓰레드는 사용자 쓰레드와 데몬 쓰레드 두 종류가 있다.
- main쓰레드는 사용자 쓰레드이고, 데몬 쓰레드는 보조역할을 하는 보조쓰레드이다.
- 사용자 쓰레드가 하나도 없을때 프로그램은 종료된다.(데몬 쓰레드는 실행 되고 있어도 사용자 쓰레드가 없으면 종료된다.)
- main쓰레드가 종료되어도 실행중인 사용자 쓰레드가 있을경우 프로그램은 계속 실행된다.

### 싱글쓰레드와 멀티쓰레드
- 싱글쓰레드는 순서대로 메소드의 작업이 끝날 때까지 기다렸다가 다음 메소드가 실행된다.(작업이 절대 겹치지 않는다)
- 멀티쓰레드는 순서와 시간은 OS의 스케줄러가 결정하며, 번갈아가며 메소드의 작업이 실행된다.
- context switching때문에 싱글쓰레드로 실행하는것 보다 멀티쓰레드로 실행하면 작업시간이 길어진다.
    - **문맥 교환**(context switch)이란?
      > 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스의 상태(문맥)를 보관하고 새로운 프로세스의 상태를 적재하는 작업을 말한다. 한 프로세스의 문맥은 그 프로세스의 프로세스 제어 블록에 기록되어 있다.

### 쓰레드의 I/O 블락킹
- I/O블락킹이란?
    - 입력/출력시 작업 중단, 사용자로부터 입력을 기다리는 동안 아무 일도 하지 않는다.
    - I/O블락킹 떄문에 사용자입력을 기다리는동안 싱글쓰레드는 아무일도 하지 못하지만, 멀티 쓰레드는 기다리는 동안 다른 작업을 수행 할 수 있다.
- context switching때문에 멀티쓰레드가 느리지만 기타 외부 환경으로 인해 싱글쓰레드에서 대기가 걸리는 시간 떄문에 멀티쓰레드의 작업 종료 시간이 더 빠르다.(더 효율적으로 작업을 진행 할 수 있다.)
